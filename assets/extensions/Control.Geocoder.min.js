this.L=this.L||{};this.L.Control=this.L.Control||{};
this.L.Control.Geocoder=function(b){function K(a){return M[a]}function N(a){if(null==a)return"";if(!a)return a+"";a=""+a;return O.test(a)?a.replace(P,K):a}function u(a,d,e,c,f){var h="_l_geocoder_"+Q++;d[f||"callback"]=h;window[h]=b.Util.bind(e,c);e=document.createElement("script");e.type="text/javascript";e.src=a+v(d);e.id=h;document.getElementsByTagName("head")[0].appendChild(e)}function l(a,b,e){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState){if(200!==c.status&&304!==
c.status)var a="";else if("string"===typeof c.response)try{a=JSON.parse(c.response)}catch(h){a=c.response}else a=c.response;e(a)}};c.open("GET",a+v(b),!0);c.responseType="json";c.setRequestHeader("Accept","application/json");c.send(null)}function R(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){a=b[c];void 0===a?a="":"function"===typeof a&&(a=a(b));return N(a)})}function v(a,d,e){var c=[],f;for(f in a){var h=encodeURIComponent(e?f.toUpperCase():f),k=a[f];if(b.Util.isArray(k))for(var g=0;g<
k.length;g++)c.push(h+"="+encodeURIComponent(k[g]));else c.push(h+"="+encodeURIComponent(k))}return(d&&-1!==d.indexOf("?")?"&":"?")+c.join("&")}function q(a,b){return new p(a,b)}b=b&&b.hasOwnProperty("default")?b["default"]:b;var Q=0,P=/[&<>"'`]/g,O=/[&<>"'`]/,M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=b.Class.extend({options:{service_url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},initialize:function(a,d){b.setOptions(this,d);this._accessToken=
a},geocode:function(a,d,e){a={SingleLine:a,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"};this._key&&this._key.length&&(a.token=this._key);l(this.options.service_url+"/findAddressCandidates",b.extend(a,this.options.geocodingQueryParams),function(a){var c=[];if(a.candidates&&a.candidates.length)for(var h=0;h<=a.candidates.length-1;h++){var k=a.candidates[h];var g=b.latLng(k.location.y,k.location.x);var m=b.latLngBounds(b.latLng(k.extent.ymax,k.extent.xmax),b.latLng(k.extent.ymin,k.extent.xmin));
c[h]={name:k.address,bbox:m,center:g}}d.call(e,c)})},suggest:function(a,b,e){return this.geocode(a,b,e)},reverse:function(a,d,e,c){a={location:encodeURIComponent(a.lng)+","+encodeURIComponent(a.lat),distance:100,f:"json"};l(this.options.service_url+"/reverseGeocode",a,function(a){var d=[];if(a&&!a.error){var f=b.latLng(a.location.y,a.location.x);d.push({name:a.address.Match_addr,center:f,bounds:b.latLngBounds(f,f)})}e.call(c,d)})}}),x=b.Class.extend({initialize:function(a){this.key=a},geocode:function(a,
d,e){u("https://dev.virtualearth.net/REST/v1/Locations",{query:a,key:this.key},function(a){var c=[];if(0<a.resourceSets.length)for(var h=a.resourceSets[0].resources.length-1;0<=h;h--){var k=a.resourceSets[0].resources[h],g=k.bbox;c[h]={name:k.name,bbox:b.latLngBounds([g[0],g[1]],[g[2],g[3]]),center:b.latLng(k.point.coordinates)}}d.call(e,c)},this,"jsonp")},reverse:function(a,d,e,c){u("//dev.virtualearth.net/REST/v1/Locations/"+a.lat+","+a.lng,{key:this.key},function(a){for(var d=[],f=a.resourceSets[0].resources.length-
1;0<=f;f--){var g=a.resourceSets[0].resources[f],m=g.bbox;d[f]={name:g.name,bbox:b.latLngBounds([m[0],m[1]],[m[2],m[3]]),center:b.latLng(g.point.coordinates)}}e.call(c,d)},this,"jsonp")}}),y=b.Class.extend({options:{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(a,d){this._key=a;b.setOptions(this,d);this.options.serviceUrl=this.options.service_url||this.options.serviceUrl},geocode:function(a,d,e){a={address:a};this._key&&
this._key.length&&(a.key=this._key);a=b.Util.extend(a,this.options.geocodingQueryParams);l(this.options.serviceUrl,a,function(a){var c=[];if(a.results&&a.results.length)for(var h=0;h<=a.results.length-1;h++){var k=a.results[h];var g=b.latLng(k.geometry.location);var m=b.latLngBounds(b.latLng(k.geometry.viewport.northeast),b.latLng(k.geometry.viewport.southwest));c[h]={name:k.formatted_address,bbox:m,center:g,properties:k.address_components}}d.call(e,c)})},reverse:function(a,d,e,c){a={latlng:encodeURIComponent(a.lat)+
","+encodeURIComponent(a.lng)};a=b.Util.extend(a,this.options.reverseQueryParams);this._key&&this._key.length&&(a.key=this._key);l(this.options.serviceUrl,a,function(a){var d=[];if(a.results&&a.results.length)for(var f=0;f<=a.results.length-1;f++){var g=a.results[f];var m=b.latLng(g.geometry.location);var l=b.latLngBounds(b.latLng(g.geometry.viewport.northeast),b.latLng(g.geometry.viewport.southwest));d[f]={name:g.formatted_address,bbox:l,center:m,properties:g.address_components}}e.call(c,d)})}}),
z=b.Class.extend({options:{geocodeUrl:"https://geocoder.api.here.com/6.2/geocode.json",reverseGeocodeUrl:"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",geocodingQueryParams:{},reverseQueryParams:{},reverseGeocodeProxRadius:null},initialize:function(a){b.setOptions(this,a)},geocode:function(a,d,e){a={searchtext:a,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1};a=b.Util.extend(a,
this.options.geocodingQueryParams);this.getJSON(this.options.geocodeUrl,a,d,e)},reverse:function(a,d,e,c){d=(d=this.options.reverseGeocodeProxRadius?this.options.reverseGeocodeProxRadius:null)?","+encodeURIComponent(d):"";a={prox:encodeURIComponent(a.lat)+","+encodeURIComponent(a.lng)+d,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1};a=b.Util.extend(a,this.options.reverseQueryParams);this.getJSON(this.options.reverseGeocodeUrl,a,e,c)},getJSON:function(a,
d,e,c){l(a,d,function(a){var d=[];if(a.response.view&&a.response.view.length)for(var f=0;f<=a.response.view[0].result.length-1;f++){var g=a.response.view[0].result[f].location;var m=b.latLng(g.displayPosition.latitude,g.displayPosition.longitude);var l=b.latLngBounds(b.latLng(g.mapView.topLeft.latitude,g.mapView.topLeft.longitude),b.latLng(g.mapView.bottomRight.latitude,g.mapView.bottomRight.longitude));d[f]={name:g.address.label,bbox:l,center:m}}e.call(c,d)})}}),A=b.Class.extend({options:{next:void 0,
sizeInMeters:1E4},initialize:function(a){b.Util.setOptions(this,a)},geocode:function(a,d,e){var c;if(c=a.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))var f=b.latLng((/N/i.test(c[1])?1:-1)*parseFloat(c[2]),(/E/i.test(c[3])?1:-1)*parseFloat(c[4]));else if(c=a.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))f=b.latLng((/N/i.test(c[2])?1:-1)*parseFloat(c[1]),(/E/i.test(c[4])?1:-1)*parseFloat(c[3]));else if(c=a.match(/^([NS])\s*(\d{1,3})\u00b0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?\W*([EW])\s*(\d{1,3})\u00b0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?$/))f=
b.latLng((/N/i.test(c[1])?1:-1)*(parseFloat(c[2])+parseFloat(c[3]/60)),(/E/i.test(c[4])?1:-1)*(parseFloat(c[5])+parseFloat(c[6]/60)));else if(c=a.match(/^(\d{1,3})\u00b0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?\s*([NS])\W*(\d{1,3})\u00b0?\s*(\d{1,3}(?:\.\d*)?)?['\u2032]?\s*([EW])$/))f=b.latLng((/N/i.test(c[3])?1:-1)*(parseFloat(c[1])+parseFloat(c[2]/60)),(/E/i.test(c[6])?1:-1)*(parseFloat(c[4])+parseFloat(c[5]/60)));else if(c=a.match(/^([NS])\s*(\d{1,3})\u00b0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]?\W*([EW])\s*(\d{1,3})\u00b0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]?$/))f=
b.latLng((/N/i.test(c[1])?1:-1)*(parseFloat(c[2])+parseFloat(c[3]/60+parseFloat(c[4]/3600))),(/E/i.test(c[5])?1:-1)*(parseFloat(c[6])+parseFloat(c[7]/60)+parseFloat(c[8]/3600)));else if(c=a.match(/^(\d{1,3})\u00b0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]\s*([NS])\W*(\d{1,3})\u00b0?\s*(\d{1,2})['\u2032]?\s*(\d{1,3}(?:\.\d*)?)?["\u2033]?\s*([EW])$/))f=b.latLng((/N/i.test(c[4])?1:-1)*(parseFloat(c[1])+parseFloat(c[2]/60+parseFloat(c[3]/3600))),(/E/i.test(c[8])?1:-1)*(parseFloat(c[5])+parseFloat(c[6]/
60)+parseFloat(c[7]/3600)));else if(c=a.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))f=b.latLng(parseFloat(c[1]),parseFloat(c[2]));f?(a=[{name:a,center:f,bbox:f.toBounds(this.options.sizeInMeters)}],d.call(e,a)):this.options.next&&this.options.next.geocode(a,d,e)}}),B=b.Class.extend({options:{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(a,d){b.setOptions(this,d);this.options.geocodingQueryParams.access_token=
a;this.options.reverseQueryParams.access_token=a},geocode:function(a,d,e){var c=this.options.geocodingQueryParams;void 0!==c.proximity&&void 0!==c.proximity.lat&&void 0!==c.proximity.lng&&(c.proximity=c.proximity.lng+","+c.proximity.lat);l(this.options.serviceUrl+encodeURIComponent(a)+".json",c,function(a){var c=[];if(a.features&&a.features.length)for(var f=0;f<=a.features.length-1;f++){var g=a.features[f];var m=b.latLng(g.center.reverse());var l=g.bbox?b.latLngBounds(b.latLng(g.bbox.slice(0,2).reverse()),
b.latLng(g.bbox.slice(2,4).reverse())):b.latLngBounds(m,m);for(var p={text:g.text,address:g.address},n=0;n<(g.context||[]).length;n++){var q=g.context[n].id.split(".")[0];p[q]=g.context[n].text}c[f]={name:g.place_name,bbox:l,center:m,properties:p}}d.call(e,c)})},suggest:function(a,b,e){return this.geocode(a,b,e)},reverse:function(a,d,e,c){l(this.options.serviceUrl+encodeURIComponent(a.lng)+","+encodeURIComponent(a.lat)+".json",this.options.reverseQueryParams,function(a){var d=[];if(a.features&&a.features.length)for(var f=
0;f<=a.features.length-1;f++){var g=a.features[f];var m=b.latLng(g.center.reverse());var l=g.bbox?b.latLngBounds(b.latLng(g.bbox.slice(0,2).reverse()),b.latLng(g.bbox.slice(2,4).reverse())):b.latLngBounds(m,m);d[f]={name:g.place_name,bbox:l,center:m}}e.call(c,d)})}}),C=b.Class.extend({options:{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},initialize:function(a,d){this._key=decodeURIComponent(a);b.Util.setOptions(this,d)},_formatName:function(){var a=[],b;for(b=0;b<arguments.length;b++)arguments[b]&&
a.push(arguments[b]);return a.join(", ")},geocode:function(a,d,e){l(this.options.serviceUrl+"/address",{key:this._key,location:a,limit:5,outFormat:"json"},b.bind(function(a){var c=[];if(a.results&&a.results[0].locations)for(var h=a.results[0].locations.length-1;0<=h;h--){var k=a.results[0].locations[h];var g=b.latLng(k.latLng);c[h]={name:this._formatName(k.street,k.adminArea4,k.adminArea3,k.adminArea1),bbox:b.latLngBounds(g,g),center:g}}d.call(e,c)},this))},reverse:function(a,d,e,c){l(this.options.serviceUrl+
"/reverse",{key:this._key,location:a.lat+","+a.lng,outputFormat:"json"},b.bind(function(a){var d=[];if(a.results&&a.results[0].locations)for(var f=a.results[0].locations.length-1;0<=f;f--){var g=a.results[0].locations[f];var l=b.latLng(g.latLng);d[f]={name:this._formatName(g.street,g.adminArea4,g.adminArea3,g.adminArea1),bbox:b.latLngBounds(l,l),center:l}}e.call(c,d)},this))}}),D=b.Class.extend({options:{userId:"<insert your userId here>",apiKey:"<insert your apiKey here>",serviceUrl:"https://neutrinoapi.com/"},
initialize:function(a){b.Util.setOptions(this,a)},geocode:function(a,d,e){l(this.options.serviceUrl+"geocode-address",{apiKey:this.options.apiKey,userId:this.options.userId,address:a.split(/\s+/).join(".")},function(a){var c=[];if(a.locations){a.geometry=a.locations[0];var h=b.latLng(a.geometry.latitude,a.geometry.longitude);var k=b.latLngBounds(h,h);c[0]={name:a.geometry.address,bbox:k,center:h}}d.call(e,c)})},suggest:function(a,b,e){return this.geocode(a,b,e)},reverse:function(a,d,e,c){l(this.options.serviceUrl+
"geocode-reverse",{apiKey:this.options.apiKey,userId:this.options.userId,latitude:a.lat,longitude:a.lng},function(d){var f=[];if(200==d.status.status&&d.found){var k=b.latLng(a.lat,a.lng);var g=b.latLngBounds(k,k);f[0]={name:d.address,bbox:g,center:k}}e.call(c,f)})}}),r=b.Class.extend({options:{serviceUrl:"https://nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(a){a=a.address;var b=[];(a.road||a.building)&&b.push("{building} {road} {house_number}");
(a.city||a.town||a.village||a.hamlet)&&b.push('<span class="'+(0<b.length?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city} {town} {village} {hamlet}</span>');(a.state||a.country)&&b.push('<span class="'+(0<b.length?"leaflet-control-geocoder-address-context":"")+'">{state} {country}</span>');return R(b.join("<br/>"),a,!0)}},initialize:function(a){b.Util.setOptions(this,a)},geocode:function(a,d,e){l(this.options.serviceUrl+"search",b.extend({q:a,limit:5,format:"json",addressdetails:1},
this.options.geocodingQueryParams),b.bind(function(a){for(var c=[],h=a.length-1;0<=h;h--){for(var k=a[h].boundingbox,g=0;4>g;g++)k[g]=parseFloat(k[g]);c[h]={icon:a[h].icon,name:a[h].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(a[h]):void 0,bbox:b.latLngBounds([k[0],k[2]],[k[1],k[3]]),center:b.latLng(a[h].lat,a[h].lon),properties:a[h]}}d.call(e,c)},this))},reverse:function(a,d,e,c){l(this.options.serviceUrl+"reverse",b.extend({lat:a.lat,lon:a.lng,zoom:Math.round(Math.log(d/
256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),b.bind(function(a){var d=[];if(a&&a.lat&&a.lon){var f=b.latLng(a.lat,a.lon);d.push({name:a.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(a):void 0,center:f,bounds:b.latLngBounds(f,f),properties:a})}e.call(c,d)},this))}}),E=b.Class.extend({options:{OpenLocationCode:void 0,codeLength:void 0},initialize:function(a){b.setOptions(this,a)},geocode:function(a,d,e){try{var c=this.options.OpenLocationCode.decode(a),
f={name:a,center:b.latLng(c.latitudeCenter,c.longitudeCenter),bbox:b.latLngBounds(b.latLng(c.latitudeLo,c.longitudeLo),b.latLng(c.latitudeHi,c.longitudeHi))};d.call(e,[f])}catch(h){console.warn(h),d.call(e,[])}},reverse:function(a,d,e,c){try{var f={name:this.options.OpenLocationCode.encode(a.lat,a.lng,this.options.codeLength),center:b.latLng(a.lat,a.lng),bbox:b.latLngBounds(b.latLng(a.lat,a.lng),b.latLng(a.lat,a.lng))};e.call(c,[f])}catch(h){console.warn(h),e.call(c,[])}}}),F=b.Class.extend({options:{serviceUrl:"https://api.opencagedata.com/geocode/v1/json"},
initialize:function(a){this._accessToken=a},geocode:function(a,d,e){l(this.options.serviceUrl,{key:this._accessToken,q:a},function(a){var c=[];if(a.results&&a.results.length)for(var h=0;h<a.results.length;h++){var k=a.results[h];var g=b.latLng(k.geometry);var l=k.annotations&&k.annotations.bounds?b.latLngBounds(b.latLng(k.annotations.bounds.northeast),b.latLng(k.annotations.bounds.southwest)):b.latLngBounds(g,g);c.push({name:k.formatted,bbox:l,center:g})}d.call(e,c)})},suggest:function(a,b,e){return this.geocode(a,
b,e)},reverse:function(a,d,e,c){l(this.options.serviceUrl,{key:this._accessToken,q:[a.lat,a.lng].join()},function(a){var d=[];if(a.results&&a.results.length)for(var f=0;f<a.results.length;f++){var g=a.results[f];var l=b.latLng(g.geometry);var n=g.annotations&&g.annotations.bounds?b.latLngBounds(b.latLng(g.annotations.bounds.northeast),b.latLng(g.annotations.bounds.southwest)):b.latLngBounds(l,l);d.push({name:g.formatted,bbox:n,center:l})}e.call(c,d)})}}),p=b.Class.extend({options:{serviceUrl:"https://api.geocode.earth/v1",
geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(a,d){b.Util.setOptions(this,d);this._apiKey=a;this._lastSuggest=0},geocode:function(a,d,e){var c=this;l(this.options.serviceUrl+"/search",b.extend({api_key:this._apiKey,text:a},this.options.geocodingQueryParams),function(a){d.call(e,c._parseResults(a,"bbox"))})},suggest:function(a,d,e){var c=this;l(this.options.serviceUrl+"/autocomplete",b.extend({api_key:this._apiKey,text:a},this.options.geocodingQueryParams),b.bind(function(a){a.geocoding.timestamp>
this._lastSuggest&&(this._lastSuggest=a.geocoding.timestamp,d.call(e,c._parseResults(a,"bbox")))},this))},reverse:function(a,d,e,c){var f=this;l(this.options.serviceUrl+"/reverse",b.extend({api_key:this._apiKey,"point.lat":a.lat,"point.lon":a.lng},this.options.reverseQueryParams),function(a){e.call(c,f._parseResults(a,"bounds"))})},_parseResults:function(a,d){var e=[];b.geoJson(a,{pointToLayer:function(a,d){return b.circleMarker(d)},onEachFeature:function(a,f){a={};if(f.getBounds){var c=f.getBounds();
var k=c.getCenter()}else f.feature.bbox?(k=f.getLatLng(),c=b.latLngBounds(b.GeoJSON.coordsToLatLng(f.feature.bbox.slice(0,2)),b.GeoJSON.coordsToLatLng(f.feature.bbox.slice(2,4)))):(k=f.getLatLng(),c=b.latLngBounds(k,k));a.name=f.feature.properties.label;a.center=k;a[d]=c;a.properties=f.feature.properties;e.push(a)}});return e}}),t=p,G=p,H=G.extend({options:{serviceUrl:"https://api.openrouteservice.org/geocode"}}),I=b.Class.extend({options:{serviceUrl:"https://photon.komoot.de/api/",reverseUrl:"https://photon.komoot.de/reverse/",
nameProperties:"name street suburb hamlet town city state country".split(" ")},initialize:function(a){b.setOptions(this,a)},geocode:function(a,d,e){a=b.extend({q:a},this.options.geocodingQueryParams);l(this.options.serviceUrl,a,b.bind(function(a){d.call(e,this._decodeFeatures(a))},this))},suggest:function(a,b,e){return this.geocode(a,b,e)},reverse:function(a,d,e,c){a=b.extend({lat:a.lat,lon:a.lng},this.options.reverseQueryParams);l(this.options.reverseUrl,a,b.bind(function(a){e.call(c,this._decodeFeatures(a))},
this))},_decodeFeatures:function(a){var d=[],e;if(a&&a.features)for(e=0;e<a.features.length;e++){var c=a.features[e];var f=c.geometry.coordinates;f=b.latLng(f[1],f[0]);var h=(h=c.properties.extent)?b.latLngBounds([h[1],h[0]],[h[3],h[2]]):b.latLngBounds(f,f);d.push({name:this._decodeFeatureName(c),html:this.options.htmlTemplate?this.options.htmlTemplate(c):void 0,center:f,bbox:h,properties:c.properties})}return d},_decodeFeatureName:function(a){return(this.options.nameProperties||[]).map(function(b){return a.properties[b]}).filter(function(a){return!!a}).join(", ")}}),
J=b.Class.extend({options:{serviceUrl:"https://api.what3words.com/v2/"},initialize:function(a){this._accessToken=a},geocode:function(a,d,e){l(this.options.serviceUrl+"forward",{key:this._accessToken,addr:a.split(/\s+/).join(".")},function(a){var c=[];if(a.geometry){var h=b.latLng(a.geometry.lat,a.geometry.lng);var k=b.latLngBounds(h,h);c[0]={name:a.words,bbox:k,center:h}}d.call(e,c)})},suggest:function(a,b,e){return this.geocode(a,b,e)},reverse:function(a,d,e,c){l(this.options.serviceUrl+"reverse",
{key:this._accessToken,coords:[a.lat,a.lng].join()},function(a){var d=[];if(200==a.status.status){var f=b.latLng(a.geometry.lat,a.geometry.lng);var g=b.latLngBounds(f,f);d[0]={name:a.words,bbox:g,center:f}}e.call(c,d)})}});t=Object.freeze({ArcGis:w,arcgis:function(a,b){return new w(a,b)},Bing:x,bing:function(a){return new x(a)},Google:y,google:function(a,b){return new y(a,b)},HERE:z,here:function(a){return new z(a)},LatLng:A,latLng:function(a){return new A(a)},Mapbox:B,mapbox:function(a,b){return new B(a,
b)},MapQuest:C,mapQuest:function(a,b){return new C(a,b)},Neutrino:D,neutrino:function(a){return new D(a)},Nominatim:r,nominatim:function(a){return new r(a)},OpenLocationCode:E,openLocationCode:function(a){return new E(a)},OpenCage:F,opencage:function(a){return new F(a)},Pelias:p,pelias:q,GeocodeEarth:t,geocodeEarth:q,Mapzen:G,mapzen:q,Openrouteservice:H,openrouteservice:function(a,b){return new H(a,b)},Photon:I,photon:function(a){return new I(a)},What3Words:J,what3words:function(a){return new J(a)}});
var n=b.Control.extend({options:{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},includes:b.Evented.prototype||b.Mixin.Events,initialize:function(a){b.Util.setOptions(this,a);this.options.geocoder||(this.options.geocoder=new r);this._requestCount=0},addThrobberClass:function(){b.DomUtil.addClass(this._container,
"leaflet-control-geocoder-throbber")},removeThrobberClass:function(){b.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")},onAdd:function(a){var d=b.DomUtil.create("div","leaflet-control-geocoder leaflet-bar"),e=b.DomUtil.create("button","leaflet-control-geocoder-icon",d),c=this._form=b.DomUtil.create("div","leaflet-control-geocoder-form",d);this._map=a;this._container=d;e.innerHTML="&nbsp;";e.type="button";e.setAttribute("aria-label",this.options.iconLabel);a=this._input=b.DomUtil.create("input",
"",c);a.type="text";a.value=this.options.query||"";a.placeholder=this.options.placeholder;b.DomEvent.disableClickPropagation(a);this._errorElement=b.DomUtil.create("div","leaflet-control-geocoder-form-no-error",d);this._errorElement.innerHTML=this.options.errorMessage;this._alts=b.DomUtil.create("ul","leaflet-control-geocoder-alternatives leaflet-control-geocoder-alternatives-minimized",d);b.DomEvent.disableClickPropagation(this._alts);b.DomEvent.addListener(a,"keydown",this._keydown,this);this.options.geocoder.suggest&&
b.DomEvent.addListener(a,"input",this._change,this);b.DomEvent.addListener(a,"blur",function(){this.options.collapsed&&!this._preventBlurCollapse&&this._collapse();this._preventBlurCollapse=!1},this);this.options.collapsed?"click"===this.options.expand?b.DomEvent.addListener(d,"click",function(a){0===a.button&&2!==a.detail&&this._toggle()},this):b.Browser.touch&&"touch"===this.options.expand?b.DomEvent.addListener(d,"touchstart mousedown",function(a){this._toggle();a.preventDefault();a.stopPropagation()},
this):(b.DomEvent.addListener(d,"mouseover",this._expand,this),b.DomEvent.addListener(d,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),b.Browser.touch?b.DomEvent.addListener(d,"touchstart",function(){this._geocode()},this):b.DomEvent.addListener(d,"click",function(){this._geocode()},this));if(this.options.defaultMarkGeocode)this.on("markgeocode",this.markGeocode,this);this.on("startgeocode",this.addThrobberClass,this);this.on("finishgeocode",this.removeThrobberClass,
this);this.on("startsuggest",this.addThrobberClass,this);this.on("finishsuggest",this.removeThrobberClass,this);b.DomEvent.disableClickPropagation(d);return d},setQuery:function(a){this._input.value=a;return this},_geocodeResult:function(a,d){if(!d&&this.options.showUniqueResult&&1===a.length)this._geocodeResultSelected(a[0]);else if(0<a.length)for(this._alts.innerHTML="",this._results=a,b.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),b.DomUtil.addClass(this._container,
"leaflet-control-geocoder-options-open"),d=0;d<a.length;d++)this._alts.appendChild(this._createAlt(a[d],d));else b.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),b.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},markGeocode:function(a){a=a.geocode||a;this._map.fitBounds(a.bbox);this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker);this._geocodeMarker=(new b.Marker(a.center)).bindPopup(a.html||a.name).addTo(this._map).openPopup();return this},
_geocode:function(a){var b=this._input.value;if(a||!(b.length<this.options.queryMinLength)){var e=++this._requestCount,c=a?"suggest":"geocode",f={input:b};this._lastGeocode=b;a||this._clearResults();this.fire("start"+c,f);this.options.geocoder[c](b,function(b){e===this._requestCount&&(f.results=b,this.fire("finish"+c,f),this._geocodeResult(b,a))},this)}},_geocodeResultSelected:function(a){this.fire("markgeocode",{geocode:a})},_toggle:function(){b.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?
this._collapse():this._expand()},_expand:function(){b.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded");this._input.select();this.fire("expand")},_collapse:function(){b.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded");b.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");b.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error");b.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open");b.DomUtil.removeClass(this._container,
"leaflet-control-geocoder-options-error");this._input.blur();this.fire("collapse")},_clearResults:function(){b.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");this._selection=null;b.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error");b.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open");b.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")},_createAlt:function(a,d){var e=b.DomUtil.create("li",""),
c=b.DomUtil.create("a","",e),f=this.options.showResultIcons&&a.icon?b.DomUtil.create("img","",c):null,h=a.html?void 0:document.createTextNode(a.name);f&&(f.src=a.icon);e.setAttribute("data-result-index",d);a.html?c.innerHTML+=a.html:c.appendChild(h);b.DomEvent.addListener(e,"mousedown touchstart",function(c){this._preventBlurCollapse=!0;b.DomEvent.stop(c);this._geocodeResultSelected(a);b.DomEvent.on(e,"click",function(){this.options.collapsed?this._collapse():this._clearResults()},this)},this);return e},
_keydown:function(a){var d=this,e=function(a){d._selection&&(b.DomUtil.removeClass(d._selection,"leaflet-control-geocoder-selected"),d._selection=d._selection[0<a?"nextSibling":"previousSibling"]);d._selection||(d._selection=d._alts[0<a?"firstChild":"lastChild"]);d._selection&&b.DomUtil.addClass(d._selection,"leaflet-control-geocoder-selected")};switch(a.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:e(-1);break;case 40:e(1);break;case 13:this._selection?
(e=parseInt(this._selection.getAttribute("data-result-index"),10),this._geocodeResultSelected(this._results[e]),this._clearResults()):this._geocode();break;default:return}b.DomEvent.preventDefault(a)},_change:function(){var a=this._input.value;a!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),a.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(b.bind(function(){this._geocode(!0)},this),this.options.suggestTimeout):this._clearResults())}});b.Util.extend(n,t);b.Util.extend(b.Control,
{Geocoder:n,geocoder:function(a){return new n(a)}});return n}(L);
